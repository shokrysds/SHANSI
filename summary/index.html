<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ÙÙ„Ø´â€ŒÚ©Ø§Ø±Øª Ù„ØºØ§Øª + Ø¢Ø²Ù…ÙˆÙ† Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ | Ù…Ø­Ù…Ø¯</title>
<style>
  :root{
    --bg:#f6f7fb; --card:#ffffff; --ink:#1f2937; --muted:#6b7280;
    --primary:#2563eb; --ok:#16a34a; --bad:#dc2626; --chip:#eef2ff;
    --shadow: 0 10px 20px rgba(0,0,0,.08);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 Vazirmatn,IRANSansX,Segoe UI,Arial}
  .wrap{max-width:1000px;margin:auto;padding:24px}
  h1{font-weight:800;margin:0 0 8px}
  .tabs{display:flex;gap:8px;margin:16px 0 24px;flex-wrap:wrap}
  .tabbtn{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px 14px;cursor:pointer}
  .tabbtn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
  .panel{display:none}
  .panel.active{display:block}

  /* Flashcards */
  .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:0 0 14px}
  input[type="search"]{flex:1;min-width:220px;padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb;background:#fff}
  .btn{border:1px solid #e5e7eb;background:#fff;padding:10px 14px;border-radius:10px;cursor:pointer}
  .btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}
  .btn.ghost{background:#fff}
  .chip{background:var(--chip);padding:4px 9px;border-radius:999px;font-size:12px;color:#3730a3}
  .card{
    background:var(--card); border-radius:18px; padding:28px; box-shadow:var(--shadow);
    min-height:220px; display:grid; place-items:center; text-align:center; position:relative; perspective:1000px;
  }
  .face{position:absolute; inset:0; display:grid; place-items:center; padding:28px; backface-visibility:hidden; transition:transform .5s}
  .front{transform:rotateY(0)}
  .back{transform:rotateY(180deg)}
  .card.flipped .front{transform:rotateY(180deg)}
  .card.flipped .back{transform:rotateY(360deg)}
  .word{font-size:28px;font-weight:800}
  .fa{color:var(--muted);margin-top:10px}
  .def{font-size:15px;margin-top:6px}
  .ex{margin-top:10px;background:#f9fafb;border:1px dashed #e5e7eb;padding:10px;border-radius:10px}
  .toolbar{display:flex;justify-content:space-between;align-items:center;margin-top:12px;gap:8px;flex-wrap:wrap}
  .progress{font-size:13px;color:var(--muted)}
  .actions{display:flex;gap:8px;flex-wrap:wrap}
  .mark{display:flex;align-items:center;gap:6px}

  /* Quiz */
  .qcard{background:#fff;border-radius:16px;box-shadow:var(--shadow);padding:18px}
  .qhead{display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:8px}
  .qtext{font-weight:700}
  .opts{display:grid;gap:8px;margin-top:8px}
  .opt{border:1px solid #e5e7eb;border-radius:12px;padding:10px 12px;background:#fff;cursor:pointer}
  .opt.correct{border-color:var(--ok);background:#ecfdf5}
  .opt.wrong{border-color:var(--bad);background:#fef2f2}
  .answer{margin-top:8px;font-size:14px}
  .bar{height:8px;background:#e5e7eb;border-radius:999px;overflow:hidden}
  .bar>span{display:block;height:100%;background:var(--primary);width:0%}

  /* Small footer */
  footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <h1>ÙÙ„Ø´â€ŒÚ©Ø§Ø±Øª Ù„ØºØ§Øª + Ø¢Ø²Ù…ÙˆÙ†</h1>
  <div class="tabs">
    <button class="tabbtn active" data-tab="flash">ÙÙ„Ø´â€ŒÚ©Ø§Ø±Øªâ€ŒÙ‡Ø§</button>
    <button class="tabbtn" data-tab="quiz">Ø¢Ø²Ù…ÙˆÙ† Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ</button>
  </div>

  <!-- Flashcards Panel -->
  <section id="flash" class="panel active">
    <div class="controls">
      <input id="search" type="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù„ØºØª..." />
      <button id="shuffle" class="btn">ğŸ”€ Ø´Ø§ÙÙ„</button>
      <button id="prev" class="btn">â¬… Ù‚Ø¨Ù„ÛŒ</button>
      <button id="flip" class="btn primary">ğŸ” Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù† Ú©Ø§Ø±Øª</button>
      <button id="next" class="btn">Ø¨Ø¹Ø¯ÛŒ â¡</button>
      <span class="chip" id="learnedChip">ÛŒØ§Ø¯Ú¯Ø±ÙØªÙ‡â€ŒÙ‡Ø§: 0</span>
    </div>

    <div class="card" id="card">
      <div class="face front">
        <div>
          <div class="word" id="frontWord">word</div>
          <div class="fa" id="pos"></div>
        </div>
      </div>
      <div class="face back">
        <div>
          <div class="word" id="fa">ØªØ±Ø¬Ù…Ù‡ ÙØ§Ø±Ø³ÛŒ</div>
          <div class="def" id="en">ØªØ¹Ø±ÛŒÙ Ø³Ø§Ø¯Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</div>
          <div class="ex" id="ex">Example: ...</div>
        </div>
      </div>
    </div>

    <div class="toolbar">
      <div class="progress"><span id="idx">1</span>/<span id="total">-</span></div>
      <div class="actions">
        <label class="mark"><input id="mark" type="checkbox" /> Ø§ÛŒÙ† Ú©Ø§Ø±Øª Ø±Ø§ Â«ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ…Â»</label>
        <button id="resetMarks" class="btn ghost">Ø­Ø°Ù Ø¹Ù„Ø§Ù…Øªâ€ŒÙ‡Ø§</button>
      </div>
    </div>
  </section>

  <!-- Quiz Panel -->
  <section id="quiz" class="panel">
    <div class="controls">
      <button id="newQuiz" class="btn primary">ğŸ“ ØªÙˆÙ„ÛŒØ¯ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯</button>
      <div class="chip">Ø³Ø¤Ø§Ù„â€ŒÙ‡Ø§ Ø§Ø² Ø¢Ø±Ø§ÛŒÙ‡ QUESTIONS Ø®ÙˆØ§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</div>
    </div>
    <div id="quizBox"></div>
    <div class="qcard" style="margin-top:14px">
      <div class="qhead"><div>Ù¾ÛŒØ´Ø±ÙØª Ø¢Ø²Ù…ÙˆÙ†</div><div id="scoreLabel">0 Ø¯Ø±Ø³Øª Ø§Ø² 0</div></div>
      <div class="bar"><span id="bar" style="width:0%"></span></div>
    </div>
  </section>

  <footer>Ø³Ø§Ø®ØªÙ‡â€ŒØ´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ù…Ø¯ âœ¨ - Ù‡Ø± Ø²Ù…Ø§Ù† Ø®ÙˆØ§Ø³ØªÛŒØŒ Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ø±Ø§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù† Ùˆ Ù„ØºØª/Ø³Ø¤Ø§Ù„ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.</footer>
</div>

<script>
/* ========= Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ =========
Ù‡Ø± Ù…ÙˆØ±Ø¯: { word, fa, en, ex, pos }
pos Ø§Ø®ØªÛŒØ§Ø±ÛŒ: Ù†ÙˆØ¹ Ú©Ù„Ù…Ù‡ (noun/verb/adj/adv/phrase)
*/
const VOCAB = [
  // â€”â€”â€” Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø² Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ (Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¢Ø²Ø§Ø¯Ø§Ù†Ù‡ Ø§Ø¶Ø§ÙÙ‡/Ú©Ù… Ú©Ù†ÛŒ) â€”â€”â€”
  {word:'definition', fa:'ØªØ¹Ø±ÛŒÙ', en:'The meaning of a word or idea.', ex:'What is the definition of "campus"?', pos:'noun'},
  {word:'campus', fa:'Ù…Ø­ÙˆØ·Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡', en:'The land and buildings of a college.', ex:'There is a bus around the campus.', pos:'noun'},
  {word:'tutor', fa:'Ù…Ø¹Ù„Ù… Ø®ØµÙˆØµÛŒ', en:'A teacher who helps one student.', ex:'I meet my tutor every Tuesday.', pos:'noun'},
  {word:'transportation', fa:'Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„', en:'Ways to move people or things.', ex:'Transportation on campus is easy.', pos:'noun'},
  {word:'entertainment', fa:'Ø³Ø±Ú¯Ø±Ù…ÛŒ', en:'Things people do for fun.', ex:'The city has a lot of entertainment.', pos:'noun'},
  {word:'theater', fa:'ØªØ¦Ø§ØªØ±', en:'A place to watch plays or movies.', ex:'We went to the theater last night.', pos:'noun'},
  {word:'art gallery', fa:'Ú¯Ø§Ù„Ø±ÛŒ Ù‡Ù†Ø±ÛŒ', en:'A place to show art.', ex:'Students visited the art gallery.', pos:'noun'},
  {word:'shuttle', fa:'Ø³Ø±ÙˆÛŒØ³ Ø±ÙØªâ€ŒÙˆØ¨Ø±Ú¯Ø´Øª', en:'A bus going back and forth.', ex:'Take the shuttle to the library.', pos:'noun'},
  {word:'dormitory (dorm)', fa:'Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡', en:'A building where students live.', ex:'My dormitory is near the cafeteria.', pos:'noun'},
  {word:'population', fa:'Ø¬Ù…Ø¹ÛŒØª', en:'Number of people in a place.', ex:'The population of the city is growing.', pos:'noun'},
  {word:'predict', fa:'Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ú©Ø±Ø¯Ù†', en:'Say what you think will happen.', ex:'Scientists predict rain tomorrow.', pos:'verb'},
  {word:'prepare', fa:'Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ø±Ø¯Ù†', en:'To get something ready.', ex:'Prepare your notes for the exam.', pos:'verb'},
  {word:'release', fa:'Ø¢Ø²Ø§Ø¯/Ø±Ù‡Ø§ Ú©Ø±Ø¯Ù†', en:'Let something go free.', ex:'They released the bird.', pos:'verb'},
  {word:'separate', fa:'Ø¬Ø¯Ø§ Ú©Ø±Ø¯Ù†', en:'Divide into parts.', ex:'Separate papers into two piles.', pos:'verb'},
  {word:'compare', fa:'Ù…Ù‚Ø§ÛŒØ³Ù‡ Ú©Ø±Ø¯Ù†', en:'Look to see same or different.', ex:'Compare these two phones.', pos:'verb'},
  {word:'wonderful', fa:'Ø¹Ø§Ù„ÛŒ', en:'Very good; great.', ex:'It was a wonderful day.', pos:'adj'},
  {word:'several', fa:'Ú†Ù†Ø¯ÛŒÙ†', en:'More than two, not many.', ex:'I have several books.', pos:'adj'},
  {word:'similar to', fa:'Ø´Ø¨ÛŒÙ‡ Ø¨Ù‡', en:'Almost the same as.', ex:'This city is similar to my town.', pos:'adj'},
  {word:'gourmet', fa:'ØºØ°Ø§ÛŒ Ù„ÙˆÚ©Ø³ Ùˆ Ø¨Ø§Ú©ÛŒÙÛŒØª', en:'Very high-quality food.', ex:'He cooked a gourmet meal.', pos:'adj'},
  {word:'huge', fa:'Ø®ÛŒÙ„ÛŒ Ø¨Ø²Ø±Ú¯', en:'Very, very big.', ex:'A huge stadium.', pos:'adj'},
  {word:'common', fa:'Ø±Ø§ÛŒØ¬', en:'Happening often.', ex:'Itâ€™s common to drink tea.', pos:'adj'},
  {word:'popular', fa:'Ù…Ø­Ø¨ÙˆØ¨', en:'Liked by many people.', ex:'Football is popular worldwide.', pos:'adj'},
  {word:'rarely', fa:'Ø¨Ù‡â€ŒÙ†Ø¯Ø±Øª', en:'Not often; almost never.', ex:'I rarely watch TV.', pos:'adv'},
  {word:'almost', fa:'ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹', en:'Very close, not completely.', ex:'Itâ€™s almost midnight.', pos:'adv'},
  {word:'throughout', fa:'Ø¯Ø± Ø³Ø±Ø§Ø³Ø±/ØªÙ…Ø§Ù… Ù…Ø¯Øª', en:'In every part or the whole time.', ex:'It rained throughout the night.', pos:'prep'},
  {word:'during', fa:'Ø¯Ø± Ø·ÙˆÙ„', en:'At the same time as.', ex:'No phones during class.', pos:'prep'},
  {word:'between', fa:'Ø¨ÛŒÙ†Ù', en:'In the space/time of two things.', ex:'Between the bank and library.', pos:'prep'},
  {word:'put purchases on credit card', fa:'Ø®Ø±ÛŒØ¯ Ø±Ø§ Ø¨Ø§ Ú©Ø§Ø±Øª Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ Ø­Ø³Ø§Ø¨ Ú©Ø±Ø¯Ù†', en:'Pay by credit card, not cash.', ex:'I put the book on my credit card.', pos:'phrase'},
  {word:'e-commerce', fa:'ØªØ¬Ø§Ø±Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©', en:'Buying and selling online.', ex:'E-commerce is growing fast.', pos:'noun'},
  {word:'journal', fa:'Ø¯ÙØªØ± ÛŒØ§Ø¯Ø¯Ø§Ø´Øª', en:'Notebook to write ideas.', ex:'Write in your journal daily.', pos:'noun'},
  {word:'environment', fa:'Ù…Ø­ÛŒØ· Ø²ÛŒØ³Øª', en:'The natural world around us.', ex:'Protect the environment.', pos:'noun'},
  {word:'hardships', fa:'Ø³Ø®ØªÛŒâ€ŒÙ‡Ø§', en:'Difficult conditions in life.', ex:'They faced many hardships.', pos:'noun'},
  {word:'homelessness', fa:'Ø¨ÛŒâ€ŒØ®Ø§Ù†Ù…Ø§Ù†ÛŒ', en:'Having no home.', ex:'Homelessness is a serious issue.', pos:'noun'},
  {word:'mammals', fa:'Ù¾Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø§Ù†', en:'Animals that feed babies with milk.', ex:'Humans are mammals.', pos:'noun'},
  {word:'cypress', fa:'Ø³Ø±Ùˆ', en:'A tall, thin tree.', ex:'A row of cypress trees.', pos:'noun'},
  {word:'elm', fa:'Ù†Ø§Ø±ÙˆÙ†', en:'A tree with wide leaves.', ex:'An old elm in the yard.', pos:'noun'},
  {word:'eucalyptus', fa:'Ø§ÙˆÚ©Ø§Ù„ÛŒÙ¾ØªÙˆØ³', en:'A tall tree with strong smell.', ex:'Koalas love eucalyptus leaves.', pos:'noun'},
  {word:'pine', fa:'Ú©Ø§Ø¬', en:'A tree with needles and cones.', ex:'Pine forests cover the hills.', pos:'noun'},
  {word:'seals', fa:'ÙÚ©â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÛŒÛŒ', en:'Sea animals living on land and water.', ex:'We saw seals on the rocks.', pos:'noun'},
  {word:'sea lions', fa:'Ø´ÛŒØ±Ù‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÛŒÛŒ', en:'Large sea mammals with loud voices.', ex:'Sea lions rested on the pier.', pos:'noun'},
  {word:'sea otters', fa:'Ø³Ù…ÙˆØ±Ù‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÛŒÛŒ', en:'Small sea mammals with thick fur.', ex:'Sea otters float on their backs.', pos:'noun'},
  {word:'tough', fa:'Ø³Ø®Øª/Ø¯Ø´ÙˆØ§Ø±', en:'Very difficult or strong.', ex:'A tough exam.', pos:'adj'},
  {word:'crime', fa:'Ø¬Ø±Ù…/Ø¬Ù†Ø§ÛŒØª', en:'An illegal act.', ex:'Stealing is a crime.', pos:'noun'},
  {word:'contrast', fa:'ØªØ¶Ø§Ø¯', en:'A clear difference.', ex:'Contrast between rich and poor.', pos:'noun'}
];

// Ù†Ù…ÙˆÙ†Ù‡â€ŒØ³ÙˆØ§Ù„â€ŒÙ‡Ø§: { q, choices:[...], answer: index(0-3), explain }
const QUESTIONS = [
  {
    q: 'Ù…Ø¹Ù†ÛŒ ØµØ­ÛŒØ­ "tutor" Ú†ÛŒØ³ØªØŸ',
    choices: ['ÙØ±ÙˆØ´Ú¯Ø§Ù‡','Ù…Ø¹Ù„Ù… Ø®ØµÙˆØµÛŒ','Ø§ØªÙˆØ¨ÙˆØ³','Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡'],
    answer: 1, explain: 'tutor ÛŒØ¹Ù†ÛŒ Ù…Ø¹Ù„Ù… Ø®ØµÙˆØµÛŒ Ú©Ù‡ Ø¨Ù‡ ÛŒÚ© Ø¯Ø§Ù†Ø´Ø¬Ùˆ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯.'
  },
  {
    q: 'Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ Ù…Ø¹Ù†ÛŒ "transportation" Ø§Ø³ØªØŸ',
    choices: ['Ø³Ø±Ú¯Ø±Ù…ÛŒ','Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„','Ø¬Ù…Ø¹ÛŒØª','Ù…Ø±Ú©Ø² Ø¨Ù‡Ø¯Ø§Ø´Øª'],
    answer: 1, explain:'Transportation ÛŒØ¹Ù†ÛŒ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ.'
  },
  {
    q: '"gourmet" Ø¨ÛŒØ´ØªØ± Ø¯Ø±Ø¨Ø§Ø±Ù‡â€ŒÛŒ Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¨Ù‡â€ŒÚ©Ø§Ø± Ù…ÛŒâ€ŒØ±ÙˆØ¯ØŸ',
    choices: ['ØºØ°Ø§ÛŒ Ø¨Ø§Ú©ÛŒÙÛŒØª Ùˆ Ù„ÙˆÚ©Ø³','Ù‡ÙˆØ§ÛŒ Ø¨Ø§Ø±Ø§Ù†ÛŒ','ÙˆØ±Ø²Ø´ Ø¯Ø´ÙˆØ§Ø±','Ø¯Ø±Ø®Øª Ú©Ø§Ø¬'],
    answer: 0, explain:'gourmet Ø¨Ø±Ø§ÛŒ ØºØ°Ø§Ù‡Ø§ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ú©ÛŒÙÛŒØª Ø§Ø³Øª.'
  },
  {
    q: 'Ú©Ø¯Ø§Ù… ØªØ±Ø¬Ù…Ù‡ Ø¨Ø±Ø§ÛŒ "homelessness" Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ',
    choices: ['Ù…Ø­ÛŒØ· Ø²ÛŒØ³Øª','Ø¨ÛŒâ€ŒØ®Ø§Ù†Ù…Ø§Ù†ÛŒ','Ø³Ø®ØªÛŒâ€ŒÙ‡Ø§','Ù¾Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø§Ù†'],
    answer: 1, explain:'homelessness ÛŒØ¹Ù†ÛŒ Ù†Ø¨ÙˆØ¯Ù† Ø®Ø§Ù†Ù‡.'
  },
  {
    q: 'Ù…Ø¹Ù†ÛŒ "rarely" Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ',
    choices: ['Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹','Ø¨Ù‡â€ŒÙ†Ø¯Ø±Øª','Ø³Ø±ÛŒØ¹','ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹'],
    answer: 1, explain:'rarely ÛŒØ¹Ù†ÛŒ Ø®ÛŒÙ„ÛŒ Ú©Ù…/Ø¨Ù‡â€ŒÙ†Ø¯Ø±Øª.'
  }
];

/* ========= ÙÙ„Ø´â€ŒÚ©Ø§Ø±Øª Ù…Ù†Ø·Ù‚ ========= */
let order = [...VOCAB.keys()];
let i = 0;
const card = document.getElementById('card');
const frontWord = document.getElementById('frontWord');
const posEl = document.getElementById('pos');
const faEl = document.getElementById('fa');
const enEl = document.getElementById('en');
const exEl = document.getElementById('ex');
const idxEl = document.getElementById('idx');
const totalEl = document.getElementById('total');
const mark = document.getElementById('mark');
const learnedChip = document.getElementById('learnedChip');
const search = document.getElementById('search');

const learned = new Set(JSON.parse(localStorage.getItem('learned')||'[]'));
function updateLearnedChip(){ learnedChip.textContent = `ÛŒØ§Ø¯Ú¯Ø±ÙØªÙ‡â€ŒÙ‡Ø§: ${learned.size}`; }
updateLearnedChip();

function show(k){
  i = (k+order.length)%order.length;
  const v = VOCAB[order[i]];
  frontWord.textContent = v.word;
  posEl.textContent = v.pos ? `(${v.pos})` : '';
  faEl.textContent = v.fa;
  enEl.textContent = v.en;
  exEl.textContent = 'Example: ' + v.ex;
  idxEl.textContent = i+1; totalEl.textContent = order.length;
  card.classList.remove('flipped');
  mark.checked = learned.has(v.word);
}
function shuffle(){
  for(let j=order.length-1;j>0;j--){
    const r = Math.floor(Math.random()*(j+1));
    [order[j],order[r]] = [order[r],order[j]];
  }
  show(0);
}
function next(){ show(i+1); }
function prev(){ show(i-1); }

document.getElementById('flip').onclick=()=>card.classList.toggle('flipped');
document.getElementById('next').onclick=next;
document.getElementById('prev').onclick=prev;
document.getElementById('shuffle').onclick=shuffle;
document.getElementById('resetMarks').onclick=()=>{
  learned.clear(); localStorage.removeItem('learned'); updateLearnedChip(); show(i);
};
mark.onchange = ()=>{
  const w = VOCAB[order[i]].word;
  mark.checked ? learned.add(w) : learned.delete(w);
  localStorage.setItem('learned', JSON.stringify([...learned]));
  updateLearnedChip();
};
search.addEventListener('input', e=>{
  const q = e.target.value.trim().toLowerCase();
  order = VOCAB.map((_,idx)=>idx).filter(idx=>{
    const v = VOCAB[idx];
    return [v.word,v.fa,v.en].join(' ').toLowerCase().includes(q);
  });
  if(order.length===0){ order=[0]; }
  show(0);
});
show(0);

/* ========= Ø¢Ø²Ù…ÙˆÙ† ========= */
const quizBox = document.getElementById('quizBox');
const scoreLabel = document.getElementById('scoreLabel');
const bar = document.getElementById('bar');
function renderQuiz(){
  quizBox.innerHTML = '';
  let correct=0, total=0;
  QUESTIONS.forEach((Q,qi)=>{
    total++;
    const card = document.createElement('div'); card.className='qcard';
    const head = document.createElement('div'); head.className='qhead';
    head.innerHTML = `<div class="qtext">Ø³Ø¤Ø§Ù„ ${qi+1}: ${Q.q}</div>`;
    card.appendChild(head);

    const opts = document.createElement('div'); opts.className='opts';
    Q.choices.forEach((c,ci)=>{
      const b = document.createElement('button'); b.type='button';
      b.className='opt'; b.textContent=c;
      b.onclick = ()=>{
        [...opts.children].forEach(x=>x.disabled=true);
        if(ci===Q.answer){ b.classList.add('correct'); correct++; }
        else { b.classList.add('wrong'); opts.children[Q.answer].classList.add('correct'); }
        ans.style.display='block';
        scoreLabel.textContent = `${correct} Ø¯Ø±Ø³Øª Ø§Ø² ${total}`;
        bar.style.width = `${Math.round(correct/total*100)}%`;
      };
      opts.appendChild(b);
    });
    const ans = document.createElement('div'); ans.className='answer'; ans.style.display='none';
    ans.textContent = 'ØªÙˆØ¶ÛŒØ­: ' + (Q.explain||'');
    card.appendChild(opts);
    card.appendChild(ans);
    quizBox.appendChild(card);
  });
  scoreLabel.textContent = `0 Ø¯Ø±Ø³Øª Ø§Ø² ${QUESTIONS.length}`;
  bar.style.width='0%';
}
renderQuiz();

document.getElementById('newQuiz').onclick=renderQuiz;

/* ========= ØªØ¨â€ŒÙ‡Ø§ ========= */
document.querySelectorAll('.tabbtn').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.tabbtn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  };
});
</script>
</body>
</html>
